---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Comparison" description="Compare mcp-go with MCP Go SDK and mark3labs/mcp-go.">
  <article class="container docs">
    <h1>Comparison</h1>

    <p class="intro">
      This page compares the three main ways to build MCP servers in Go. Each project serves a different purpose
      and operates at a different abstraction level.
    </p>

    <section>
      <h2>Mental model</h2>
      <div class="stack-diagram">
        <div class="stack-layer stack-framework">
          <span class="stack-name">mcp-go</span>
          <span class="stack-desc">Framework</span>
        </div>
        <div class="stack-layer stack-sdk">
          <span class="stack-name">mark3labs/mcp-go</span>
          <span class="stack-desc">Community SDK</span>
        </div>
        <div class="stack-layer stack-protocol">
          <span class="stack-name">MCP Go SDK</span>
          <span class="stack-desc">Protocol</span>
        </div>
      </div>
      <p>
        These are complementary, not mutually exclusive. Think of it like HTTP in Go:
      </p>
      <ul>
        <li><strong>MCP Go SDK</strong> → <code>net/http</code> (protocol implementation)</li>
        <li><strong>mark3labs/mcp-go</strong> → HTTP client/server helpers</li>
        <li><strong>mcp-go</strong> → <strong>Gin</strong> (application framework)</li>
      </ul>
    </section>

    <section>
      <h2>Feature comparison</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Capability</th>
              <th>MCP Go SDK</th>
              <th>mark3labs/mcp-go</th>
              <th>mcp-go</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Abstraction level</td>
              <td>Protocol</td>
              <td>SDK</td>
              <td>Framework</td>
            </tr>
            <tr>
              <td>Typed handlers</td>
              <td class="no">—</td>
              <td class="no">—</td>
              <td class="yes">✓</td>
            </tr>
            <tr>
              <td>Auto JSON Schema</td>
              <td class="no">—</td>
              <td class="no">—</td>
              <td class="yes">✓</td>
            </tr>
            <tr>
              <td>Input validation</td>
              <td class="no">—</td>
              <td>Manual</td>
              <td class="yes">Automatic</td>
            </tr>
            <tr>
              <td>Middleware</td>
              <td class="no">—</td>
              <td class="no">—</td>
              <td class="yes">✓</td>
            </tr>
            <tr>
              <td>URI templates</td>
              <td class="no">—</td>
              <td class="no">—</td>
              <td class="yes">✓</td>
            </tr>
            <tr>
              <td>Production defaults</td>
              <td class="no">—</td>
              <td class="no">—</td>
              <td class="yes">✓</td>
            </tr>
            <tr>
              <td>Best for</td>
              <td>SDK authors</td>
              <td>Prototypes</td>
              <td>Production</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <h2>Tool registration</h2>

      <h3>MCP Go SDK</h3>
      <p>Manual dispatch and decoding:</p>
      <pre><code>{`// Protocol SDK style (manual dispatch)
for {
    raw := readMessage()
    msg := mcp.Decode(raw)

    switch msg.Type {
    case "tools/call":
        name := msg.Params["name"].(string)
        args := msg.Params["arguments"].(map[string]any)
        // manually decode, call handler, encode response
    }
}`}</code></pre>

      <h3>mark3labs/mcp-go</h3>
      <p>Server object with untyped handlers:</p>
      <pre><code>{`srv := server.NewMCPServer("my-server", "1.0.0")

srv.AddTool(mcp.Tool{
    Name:        "search",
    Description: "Search for items",
    InputSchema: mcp.ToolInputSchema{
        Type: "object",
        Properties: map[string]any{
            "query": map[string]any{"type": "string"},
        },
    },
}, func(ctx context.Context, req mcp.CallToolRequest) (*mcp.CallToolResult, error) {
    query, _ := req.Params.Arguments["query"].(string)
    return mcp.NewToolResultText(results), nil
})`}</code></pre>

      <h3>mcp-go</h3>
      <p>Typed handlers with automatic schema:</p>
      <pre><code>{`srv := mcp.NewServer(mcp.ServerInfo{Name: "my-server", Version: "1.0.0"})

type SearchInput struct {
    Query string \`json:"query" jsonschema:"required"\`
}

srv.Tool("search").
    Description("Search for items").
    Handler(func(ctx context.Context, in SearchInput) ([]string, error) {
        return search(in.Query), nil
    })`}</code></pre>
    </section>

    <section>
      <h2>Input validation</h2>

      <h3>MCP Go SDK / mark3labs</h3>
      <p>Manual type assertions and validation:</p>
      <pre><code>{`func handler(ctx context.Context, req mcp.CallToolRequest) (*mcp.CallToolResult, error) {
    query, ok := req.Params.Arguments["query"].(string)
    if !ok || query == "" {
        return nil, errors.New("query is required")
    }
    limit, _ := req.Params.Arguments["limit"].(float64)
    if limit < 1 || limit > 100 {
        return nil, errors.New("limit must be 1-100")
    }
    // ...
}`}</code></pre>

      <h3>mcp-go</h3>
      <p>Declarative validation via struct tags:</p>
      <pre><code>{`type SearchInput struct {
    Query string \`json:"query" jsonschema:"required,minLength=1"\`
    Limit int    \`json:"limit" jsonschema:"minimum=1,maximum=100"\`
}

srv.Tool("search").Handler(func(ctx context.Context, in SearchInput) ([]string, error) {
    // in.Query and in.Limit are already validated
    return search(in.Query, in.Limit), nil
})`}</code></pre>
    </section>

    <section>
      <h2>Middleware</h2>

      <h3>MCP Go SDK / mark3labs</h3>
      <p>No built-in middleware. You wrap handlers manually:</p>
      <pre><code>{`handler := func(ctx context.Context, req Request) (Response, error) { ... }

handler = withTimeout(5*time.Second, handler)
handler = withAuth(authz, handler)
handler = withLogging(logger, handler)`}</code></pre>

      <h3>mcp-go</h3>
      <p>First-class middleware chain:</p>
      <pre><code>{`srv.Use(
    middleware.Recover(),
    middleware.RequestID(),
    middleware.Timeout(5*time.Second),
    middleware.Logging(logger),
    middleware.Auth(authValidator),
)`}</code></pre>
    </section>

    <section>
      <h2>Resources with URI templates</h2>

      <h3>MCP Go SDK / mark3labs</h3>
      <p>Manual URI parsing:</p>
      <pre><code>{`srv.AddResource(mcp.Resource{
    URI:  "incidents://",
    Name: "Incidents",
}, func(ctx context.Context, req mcp.ReadResourceRequest) (string, error) {
    uri := req.Params.URI
    id := strings.TrimPrefix(uri, "incidents://")
    // ...
})`}</code></pre>

      <h3>mcp-go</h3>
      <p>Built-in URI templates with parameter extraction:</p>
      <pre><code>{`srv.Resource("incidents://{id}").
    Name("Incident").
    MimeType("application/json").
    Handler(func(ctx context.Context, uri string, params map[string]string) (*mcp.ResourceContent, error) {
        id := params["id"]  // extracted automatically
        // ...
    })`}</code></pre>
    </section>

    <section>
      <h2>Prompts</h2>

      <h3>mark3labs/mcp-go</h3>
      <p>Untyped arguments:</p>
      <pre><code>{`srv.AddPrompt(mcp.Prompt{
    Name:        "summarize",
    Description: "Summarize content",
}, func(ctx context.Context, req mcp.GetPromptRequest) (*mcp.GetPromptResult, error) {
    topic, _ := req.Params.Arguments["topic"].(string)
    // ...
})`}</code></pre>

      <h3>mcp-go</h3>
      <p>Declared arguments with validation:</p>
      <pre><code>{`srv.Prompt("summarize").
    Description("Summarize content").
    Argument("topic", "Topic to summarize", true).
    Handler(func(ctx context.Context, args map[string]string) (*mcp.PromptResult, error) {
        topic := args["topic"]  // guaranteed present
        // ...
    })`}</code></pre>
    </section>

    <section>
      <h2>When to choose what</h2>
      <div class="choice-grid">
        <div class="choice-card">
          <h3>MCP Go SDK</h3>
          <p>Choose if you:</p>
          <ul>
            <li>Need maximum control over the protocol</li>
            <li>Are building another SDK or client</li>
            <li>Want to stay closest to the spec</li>
          </ul>
        </div>
        <div class="choice-card">
          <h3>mark3labs/mcp-go</h3>
          <p>Choose if you:</p>
          <ul>
            <li>Want a popular community SDK</li>
            <li>Are experimenting or prototyping</li>
            <li>Prefer "bring your own architecture"</li>
          </ul>
        </div>
        <div class="choice-card choice-card-accent">
          <h3>mcp-go</h3>
          <p>Choose if you:</p>
          <ul>
            <li>Want typed handlers and validation</li>
            <li>Need middleware and production defaults</li>
            <li>Deploy MCP servers as real services</li>
          </ul>
        </div>
      </div>
    </section>
  </article>
</BaseLayout>

<style>
  .docs {
    max-width: 900px;
    padding-top: var(--space-8);
    padding-bottom: var(--space-16);
  }

  .intro {
    font-size: var(--text-lg);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-8);
  }

  .docs section {
    margin-bottom: var(--space-12);
  }

  .stack-diagram {
    display: flex;
    flex-direction: column;
    gap: 2px;
    margin-bottom: var(--space-6);
    max-width: 400px;
  }

  .stack-layer {
    display: flex;
    justify-content: space-between;
    padding: var(--space-4);
    border-radius: var(--radius-sm);
  }

  .stack-name {
    font-family: var(--font-mono);
    font-weight: 500;
  }

  .stack-desc {
    color: var(--color-text-muted);
    font-size: var(--text-sm);
  }

  .stack-framework {
    background-color: var(--color-accent);
    color: white;
  }

  .stack-framework .stack-desc {
    color: rgba(255, 255, 255, 0.8);
  }

  .stack-sdk {
    background-color: var(--color-bg-muted);
  }

  .stack-protocol {
    background-color: var(--color-bg-surface);
  }

  .table-wrapper {
    overflow-x: auto;
  }

  .yes {
    color: #22c55e;
    font-weight: 500;
  }

  .no {
    color: var(--color-text-muted);
  }

  .choice-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
  }

  .choice-card {
    padding: var(--space-6);
    background-color: var(--color-bg-surface);
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-md);
  }

  .choice-card h3 {
    margin-bottom: var(--space-3);
    font-size: var(--text-lg);
  }

  .choice-card p {
    font-size: var(--text-sm);
    margin-bottom: var(--space-3);
  }

  .choice-card ul {
    margin: 0;
    padding-left: var(--space-4);
  }

  .choice-card li {
    font-size: var(--text-sm);
    margin-bottom: var(--space-1);
  }

  .choice-card-accent {
    border-color: var(--color-accent);
    background-color: rgba(79, 124, 255, 0.05);
  }
</style>
